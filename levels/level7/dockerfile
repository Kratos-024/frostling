FROM alpine:latest

# Install bash
RUN apk add --no-cache bash

# Create user and set password
RUN adduser -D -s /bin/bash level9 && \
    echo "level9:5lAUBEtWroOKUAlgQ" | chpasswd

# Create directory for documents
RUN mkdir -p /home/level9/documents
COPY documents/ /home/level9/documents/

# Set ownership and secure permissions
RUN chown -R level9:level9 /home/level9
RUN find /home -type d -exec chmod 555 {} \; \
    && find /home -type f -exec chmod 444 {} \;

# Switch to non-root user
USER level9
WORKDIR /home/level9

CMD ["/bin/bash", "-c", "tail -f /dev/null"]
